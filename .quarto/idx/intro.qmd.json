{"title":"Introduction","markdown":{"headingText":"Introduction","containsRefs":false,"markdown":"\n```{r, include = FALSE}\nsuppressWarnings(suppressPackageStartupMessages({\n  library(data.table)\n  library(tidyverse)\n  library(tidymodels)\n  library(naniar)\n  library(readxl)\n  library(janitor)\n  library(rmarkdown)\n  library(knitr)\n  library(kableExtra)\n  library(modelsummary)\n  library(DoubleML)\n  library(mlr3)\n  library(broom)\n  library(sandwich)\n  library(lmtest)\n  library(mlr3learners)\n  library(readr)\n  library(MatchIt)\n  library(ggplot2)\n  library(dplyr)\n  library(summarytools)\n  library(DataExplorer)\n  library(mlr3learners)\n  library(mlr3measures)\n  library(mlr3resampling) \n}))\nset.seed(1111)\ndata010a <- rnorm(1000000)\nhist(\n  data010a,\n  labels = TRUE,\n  col = \"grey\",\n  breaks = 100,\n  main = \"Histogram of Random Data\",\n  xlab = \"Value\",\n  ylab = \"Frequency\"\n)\nrdx = rnorm(1000)\nrdy = as.numeric(rdx > 0)\nrdix = sample(1:1000, 100)\nrdy[rdix] = 1 - rdy[rdix]\nrdf = data.frame(rdx, rdy)\nplot(rdf$rdx, rdf$rdy)\nm <- glm(rdy ~ rdx, data = rdf, family = binomial())\nxs <- seq(min(rdf$rdx), max(rdf$rdx), length.out = 300)\nlines(\n  xs,\n  predict(m, newdata = data.frame(rdx = xs), type = \"response\"),\n  lwd = 2\n)\nload(\"correctional_stats_report_environment1b.RData\")\n```\n\n### A01-RC Detailed Dataset\n\n```{r, echo = FALSE}\ndataframe_original <- df\ncols_to_rename <- setdiff(names(dataframe_original), \"unique_individual_id\")\nnum_to_letters <- function(n) {\n  sapply(n, function(i) {\n    out <- \"\"\n    while (i > 0) {\n      i <- i - 1\n      out <- paste0(letters[(i %% 26) + 1], out)\n      i <- i %/% 26\n    }\n    out\n  })\n}\nnew_names <- paste0(\"x1\", num_to_letters(seq_along(cols_to_rename)))\nnames(dataframe_original)[match(cols_to_rename, names(dataframe_original))] <- new_names\nknitr::kable(\n  head(dataframe_original[, setdiff(names(dataframe_original), \"unique_individual_id\")], 10),\n  booktabs = TRUE, longtable = TRUE,\n  caption = \"Ontario Restrictive Confinement Dataframe (2023-2025)\")\n```\n\n```{r, echo = FALSE}\nsuppressWarnings(suppressPackageStartupMessages({\n  library(data.table)\n  library(tidyverse)\n  library(tidymodels)\n  library(naniar)\n  library(readxl)\n  library(janitor)\n  library(rmarkdown)\n  library(knitr)\n  library(kableExtra)\n  library(modelsummary)\n  library(DoubleML)\n  library(mlr3)\n  library(broom)\n  library(sandwich)\n  library(lmtest)\n  library(mlr3learners)\n  library(readr)\n  library(MatchIt)\n  library(ggplot2)\n  library(dplyr)\n  library(summarytools)\n  library(DataExplorer)\n  library(mlr3learners)\n  library(mlr3measures)\n  library(mlr3resampling) \n}))\nload(\"correctional_stats_report_environment1b.RData\")\nregion_names <- c(\"Central\", \"Eastern\", \"Northern\", \"Toronto\", \"Western\")\nage_levels <- c(\"18 to 24\", \"25 to 49\", \"50+\")\nsex_levels <- c(\"Male\", \"Female\")\nyears <- 2023:2025\ndf_rc <- as.data.table(df)\ndf_rc[, end_fiscal_year := as.integer(end_fiscal_year)]\ndf_rc[, age_category := factor(age_category, levels = age_levels)]\ndf_rc[, gender := factor(gender, levels = sex_levels)]\ndf_rc[,\n  region_at_time_of_placement := factor(\n    region_at_time_of_placement,\n    levels = region_names\n  )\n]\nget_region_by_age <- function(D, yr, sex = NULL) {\n  tmp <- D[\n    end_fiscal_year == yr &\n      !is.na(age_category) &\n      !is.na(region_at_time_of_placement)\n  ]\n  if (!is.null(sex)) {\n    tmp <- tmp[gender == sex]\n  }\n  tab <- tmp[,\n    .(n = uniqueN(unique_individual_id)),\n    by = .(age_category, region_at_time_of_placement)\n  ]\n  grid <- CJ(\n    age_category = age_levels,\n    region_at_time_of_placement = region_names,\n    unique = TRUE\n  )\n  tab <- merge(\n    grid,\n    tab,\n    by = c(\"age_category\", \"region_at_time_of_placement\"),\n    all.x = TRUE\n  )\n  tab[is.na(n), n := 0L]\n  wide <- dcast(\n    tab,\n    age_category ~ region_at_time_of_placement,\n    value.var = \"n\"\n  )\n  S <- as.matrix(wide[, -1])\n  rownames(S) <- wide$age_category\n  den <- rowSums(S)\n  P <- sweep(S, 1, den, \"/\")\n  P[den == 0, ] <- NA_real_\n  list(S = S, P = P)\n}\nP_year <- list()\nS_year <- list()\nfor (yr in years) {\n  out_all <- get_region_by_age(df_rc, yr)\n  P <- out_all$P\n  S_year[[as.character(yr)]] <- out_all$S\n  P_year[[as.character(yr)]] <- P\n  cols <- seq_len(ncol(P))\n  matplot(\n    P,\n    type = \"l\",\n    lwd = 2,\n    lty = 1,\n    col = cols,\n    xaxt = \"n\",\n    xlab = \"Age Group\",\n    ylab = \"Proportion\",\n    main = paste0(yr, \" Region at Time of Placement by Age Group\")\n  )\n  axis(1, at = seq_len(nrow(P)), labels = rownames(P))\n  legend(\n    \"topright\",\n    legend = colnames(P),\n    col = cols,\n    lty = 1,\n    lwd = 2,\n    bty = \"n\"\n  )\n  par(mfrow = c(1, 2), mar = c(4, 4, 3, 1))\n  for (sex in c(\"Male\", \"Female\")) {\n    out_sex <- get_region_by_age(df_rc, yr, sex = sex)\n    Psex <- out_sex$P\n    cols <- seq_len(ncol(Psex))\n    matplot(\n      Psex,\n      type = \"l\",\n      lwd = 2,\n      lty = 1,\n      col = cols,\n      xaxt = \"n\",\n      xlab = \"Age Group\",\n      ylab = \"Proportion\",\n      main = paste0(yr, \" RTP (\", sex, \")\")\n    )\n    axis(1, at = seq_len(nrow(Psex)), labels = rownames(Psex))\n    legend(\n      \"topright\",\n      legend = colnames(Psex),\n      col = cols,\n      lty = 1,\n      lwd = 2,\n      bty = \"n\"\n    )\n  }\n  par(mfrow = c(1, 1))\n}\n```\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"github","include-in-header":["includez/rename-other-links.html","includez/sidebar-title-home.html"],"output-file":"intro.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","bibliography":["references.bib"],"pdf":{"documentclass":"scrreprt"},"epub":{"cover-image":"cvr1b.png"},"respect-user-color-scheme":true,"theme":{"light":["cosmo","brand"],"dark":["darkly","dracula"]},"comments":{"hypothesis":false},"other-links":[{"text":"Partial Notebook","href":"https://vanshsinghruhela-statistical-report-on-restrictive-confinement.share.connect.posit.cloud"},{"text":"Prelim. DPR","href":"https://vanshsinghruhela-statistical-report-on-restrictive-confinement.share.connect.posit.cloud/prelim_report.html"},{"text":"Row Exp. DPR","href":"https://vanshsinghruhela-statistical-report-on-restrictive-confinement.share.connect.posit.cloud/final_report.html"}],"cold-fold":true},"extensions":{"book":{"multiFile":true}}},"docx":{"identifier":{"display-name":"MS Word","target-format":"docx","base-format":"docx"},"execute":{"fig-width":5,"fig-height":4,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"docx","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"page-width":6.5},"pandoc":{"default-image-extension":"png","to":"docx","output-file":"intro.docx"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"bibliography":["references.bib"],"pdf":{"documentclass":"scrreprt"},"epub":{"cover-image":"cvr1b.png"}},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","docx"]}